{% extends "app/layoutnav.html" %}

{% block content %}
<body>
    {% if user.is_authenticated %}
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-6">
                            <div class="card">
								<div class="content">
									<div class="row">
										<div class="col-xs-5">
											<div class="icon-big icon-warning text-center">
												<i class="ti-user"></i>
											</div>
										</div>
										<div class="col-xs-7">
											<div class="numbers">
												<p>学生数</p>
												105
											</div>
										</div>
									</div>
								</div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="ti-light-bulb text-warning"></i> 学生整体状态较好
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6">
                            <div class="card">
								<div class="content">
									<div class="row">
										<div class="col-xs-5">
											<div class="icon-big icon-danger text-center">
												<i class="ti-receipt"></i>
											</div>
										</div>
										<div class="col-xs-7">
											<div class="numbers">
												<p>考试次数</p>
												4
											</div>
										</div>
									</div>
								</div>
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="ti-tag text-warning"></i> 即将到达第5次模考
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6">
                            <div class="card">
								<div class="content">
									<div class="row">
										<div class="col-xs-5">
											<div class="icon-big icon-success text-center">
												<i class="ti-pulse"></i>
											</div>
										</div>
										<div class="col-xs-7">
											<div class="numbers">
												<p>成绩变化</p>
												+1.5%
											</div>
										</div>
									</div>
								</div>
								<div class="card-footer">
                                    <div class="stats">
                                        <i class="ti-calendar"></i> 较上次考试总体上升1.5%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6">
                            <div class="card">
								<div class="content">
									<div class="row">
										<div class="col-xs-5">
											<div class="icon-big icon-info text-center">
												<i class="ti-crown"></i>
											</div>
										</div>
										<div class="col-xs-7">
											<div class="numbers">
												<p>最近一次考试</p>
												No.3
											</div>
										</div>
									</div>
								</div>
								<div class="card-footer">
                                    <div class="stats">
                                        <i class="ti-medall"></i> 位列同系班第三位
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card" style="min-height: 350px">
                                <div id="main" style="width: 100%;height:350px;"></div>
                            </div>
                        </div>
						<div class="col-lg-3 col-sm-6">
							<div class="card card-circle-chart" data-background="color" data-color="orange" style="min-height: 350px">
								<div class="header text-center">
	                                <h5 class="title">距离下次考试</h5>
	                                <p class="description">还剩 {{next_test}} 天</p>
	                            </div>
								<div class="content">
									<div id="chartNewVisitors" class="chart-circle" data-percent="{{next_test_precent}}">{{next_test_precent}}%</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3 col-sm-6">
							<div class="card card-circle-chart" data-background="color" data-color="brown" style="min-height: 350px">
								<div class="header text-center">
	                                <h5 class="title">距离高考</h5>
	                                <p class="description">还剩 {{final_test}} 天</p>
	                            </div>
								<div class="content">
									<div id="chartSubscriptions" class="chart-circle" data-percent="{{final_test_precent}}">{{final_test_precent}}%</div>
								</div>
							</div>
						</div>
                    </div>
                    <div class="row">      
                        <div class="col-lg-12 col-md-12">
                            <div class="card" style="min-height: 485px">
                                <div class="header card-header-text">
                                    <h4 class="title">学生成绩变化表</h4>
                                    <p class="category">在第4次考试中变化较大的学生</p>
                                </div>
                                <div class="content table-responsive">
                                    <table class="table table-hover">
                                        <thead class="text-primary">
											<tr>
												<th>学号</th>
												<th>姓名</th>
												<th>科目一</th>
												<th>科目二</th>
                                                <th>科目三</th>
                                                <th>科目四</th>
                                                <th>排名</th>
											</tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>20190440432</td>
                                                <td>叶子豪</td>
                                                <td>90</td>
                                                <td>20</td>
                                                <td>60</td>
                                                <td>90</td>
                                                <td>90</td>
                                            </tr>
                                            <tr>
                                                <td>20190440438</td>
                                                <td>叶子黑</td>
                                                <td>90</td>
                                                <td>42</td>
                                                <td>55</td>
                                                <td>90</td>
                                                <td>10</td>
                                            </tr>
                                            <tr>
                                                <td>20190440492</td>
                                                <td>叶子白</td>
                                                <td>90</td>
                                                <td>30</td>
                                                <td>62</td>
                                                <td>90</td>
                                                <td>930</td>
                                            </tr>
                                            <tr>
                                                <td>20190440433</td>
                                                <td>叶子蓝</td>
                                                <td>90</td>
                                                <td>22</td>
                                                <td>60</td>
                                                <td>90</td>
                                                <td>943242</td>
                                            </tr>
                                            <tr>
                                                <td>20190440434</td>
                                                <td>叶子紫</td>
                                                <td>90</td>
                                                <td>20</td>
                                                <td>50</td>
                                                <td>90</td>
                                                <td>6666</td>
                                            </tr>
                                            <tr>
                                                <td>20190440435</td>
                                                <td>叶子红</td>
                                                <td>90</td>
                                                <td>20</td>
                                                <td>60</td>
                                                <td>90</td>
                                                <td>5</td>
                                            </tr>
                                            <tr>
                                                <td>20190440436</td>
                                                <td>叶子绿</td>
                                                <td>86</td>
                                                <td>20</td>
                                                <td>60</td>
                                                <td>90</td>
                                                <td>4</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>           
                    </div>
                </div>
    {% else %}

<h2>您无权访问该页面，若未登录请登录！</h2>
<a class="f-20" href="{% url 'login' %}">Log in</a>
{% endif %}
{% endblock %}
{% block scripts %}
     <script type="text/javascript">
         function navset() {
             var navs = document.getElementById("overview")
             navs.setAttribute("class", "active")
         }
         window.onload=navset();
    </script>
     <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var option;
        // 指定图表的配置项和数据
        option = {
            title: {
                top:'3%',
                text: '成绩走势'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['语文', '数学', '英语', '物理', '化学','生物']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                right:'5%',
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['一模', '二模', '三模', '四模', '五模', '六模', '高考']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    name: '语文',
                    type: 'line',                   
                    data: [120, 132, 111, 134, 90, 130, 129]
                },
                {
                    name: '数学',
                    type: 'line',                    
                    data: [132, 119, 121, 115, 131, 129, 111]
                },
                {
                    name: '英语',
                    type: 'line',                    
                    data: [140, 132, 101, 144, 120, 125, 110]
                },
                {
                    name: '物理',
                    type: 'line',                   
                    data: [80, 90, 101, 95, 86, 98, 80]
                },
                {
                    name: '化学',
                    type: 'line',               
                    data: [80, 70, 78, 76, 68, 88, 97]
                },
                {
                    name: '生物',
                    type: 'line',                    
                    data: [68, 82, 88, 79, 90, 76, 69]
                }

            ]
        };
         window.onresize = function () { myChart.resize(); }
        // 使用刚指定的配置项和数据显示图表。
        option && myChart.setOption(option);
    </script>
</body>

{% endblock %}